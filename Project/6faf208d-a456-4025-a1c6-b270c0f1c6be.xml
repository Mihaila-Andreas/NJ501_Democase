{"CLs":[{"__type":"LD","Var":"EM3_Gear"},{"__type":"IST","EID":"3a9a8855-4a44-4a25-ab3c-2bc39e5d7fbe","H":525.99999999999989,"Ix":1,"TXT":"IF Velocity=0 THEN Move_Velocity:=100;\u000d\u000a\u0009ELSIF Velocity=1 THEN Move_Velocity:=200;\u000d\u000a\u0009ELSIF Velocity=2 THEN Move_Velocity:=300;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aIF RatioNum=0 THEN Ratio_Num:=1;\u000d\u000a\u0009ELSIF RatioNum=1 THEN Ratio_Num:=2;\u000d\u000a\u0009ELSIF RatioNum=2 THEN Ratio_Num:=4;\u000d\u000a\u0009ELSIF RatioNum=3 THEN Ratio_Num:=6;\u000d\u000a\u0009ELSIF RatioNum=4 THEN Ratio_Num:=10;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000aIF RatioDen=0 THEN Ratio_Den:=1;\u000d\u000a\u0009ELSIF RatioDen=1 THEN Ratio_Den:=2;\u000d\u000a\u0009ELSIF RatioDen=2 THEN Ratio_Den:=4;\u000d\u000a\u0009ELSIF RatioDen=3 THEN Ratio_Den:=6;\u000d\u000a\u0009ELSIF RatioDen=4 THEN Ratio_Den:=10;\u000d\u000aEND_IF;\u000d\u000aRatio_Num:=-Ratio_Num;\u000d\u000a\u000d\u000a(* Gear wants to confont upper and lower disks, lower disk using conveyor (100) Units\u000d\u000aTherefore we apply the 100\/360 correction in order to make physically match both disks*)\u000d\u000a\u000d\u000aRatio_Num:=Ratio_Num*-100;\u000d\u000aRatio_Den:=Ratio_Den*360;\u000d\u000a\u000d\u000a","W":674,"X":1}],"CMT":"\/\/ Gear FUNCTION PROGRAM","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"EM3_Gear"},{"__type":"LD","Var":"InGear","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"Move_Velocity"},{"__type":"PRM","Arg":"In2","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"OldVelocity2"}],"Ix":7,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":2},{"__type":"ST","Ix":2,"Var":"Execute_GearIn1","X":3},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":5,"Type":"ANY","Var":"Move_Velocity"}],"Ix":8,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":6,"Type":"ANY","Var":"OldVelocity2"}],"X":2,"Y":1},{"__type":"HL","X":3,"Y":1}],"LRI":9,"RRI":10,"VLs":[{"Ix":11,"X":2}]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"EM3_Gear"},{"__type":"LD","Var":"InGear","X":1},{"__type":"LD","Ix":1,"Var":"GearIn_Enable.Active","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"Ratio_Num"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"Old_Ratio_Num"}],"Ix":8,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":3},{"__type":"ST","Ix":3,"Var":"Execute_GearIn2","X":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY","Var":"Ratio_Num"}],"Ix":9,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":7,"Type":"ANY","Var":"Old_Ratio_Num"}],"X":3,"Y":1},{"__type":"HL","X":4,"Y":1}],"LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":3}]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"EM3_Gear"},{"__type":"LD","Var":"InGear","X":1},{"__type":"LD","Ix":1,"Var":"GearIn_Enable.Active","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":4,"Type":"ANY_ELEMENTARY, ENUM","Var":"Ratio_Den"},{"__type":"PRM","Arg":"In2","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"Old_Ratio_Den"}],"Ix":8,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":3},{"__type":"ST","Ix":3,"Var":"Execute_GearIn3","X":4},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":6,"Type":"ANY","Var":"Ratio_Den"}],"Ix":9,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":7,"Type":"ANY","Var":"Old_Ratio_Den"}],"X":3,"Y":1},{"__type":"HL","X":4,"Y":1}],"LRI":10,"RRI":11,"VLs":[{"Ix":12,"X":3}]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"EM3_Gear"},{"__type":"LD","Var":"Execute_GearIn","X":1},{"__type":"FB","In":[{"__type":"PRM","Arg":"Master","IO":true,"Ix":3,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PRM","Arg":"Slave","IO":true,"Ix":4,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"RatioNumerator","Ix":5,"Type":"DINT","Var":"Ratio_Num"},{"__type":"PRM","Arg":"RatioDenominator","Ix":6,"Type":"UDINT","Var":"Ratio_Den"},{"__type":"PRM","Arg":"ReferenceType","Ix":7,"Type":"_eMC_REFERENCE_TYPE","Var":""},{"__type":"PRM","Arg":"Acceleration","Ix":8,"Type":"LREAL","Var":"10000"},{"__type":"PRM","Arg":"Deceleration","Ix":9,"Type":"LREAL","Var":"10000"},{"__type":"PRM","Arg":"Jerk","Ix":10,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"BufferMode","Ix":11,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":19,"Name":"MC_GearIn","Out":[{"__type":"PRM","Arg":"Master","IO":true,"Ix":12,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PRM","Arg":"Slave","IO":true,"Ix":13,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"InGear"},{"__type":"PRM","Arg":"Busy","Ix":14,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":15,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":16,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":17,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":18,"Type":"WORD","Var":""}],"X":2,"Var":"GearIn_Enable"},{"__type":"ST","Ix":2,"Var":"InGear","X":3}],"LRI":20,"RRI":21,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"EM3_Gear"},{"__type":"LD","Not":true,"Var":"Disk.Status.Disabled","X":1},{"__type":"LD","Ix":1,"Var":"Execute_GearIn","X":2},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":3,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Velocity","Ix":4,"Type":"LREAL","Var":"Move_Velocity"},{"__type":"PRM","Arg":"Acceleration","Ix":5,"Type":"LREAL","Var":"10000"},{"__type":"PRM","Arg":"Deceleration","Ix":6,"Type":"LREAL","Var":"10000"},{"__type":"PRM","Arg":"Jerk","Ix":7,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"Direction","Ix":8,"Type":"_eMC_DIRECTION","Var":""},{"__type":"PRM","Arg":"Continuous","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"BufferMode","Ix":10,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":17,"Name":"MC_MoveVelocity","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":11,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"InVelocity"},{"__type":"PRM","Arg":"Busy","Ix":12,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":13,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":14,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":15,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":16,"Type":"WORD","Var":""}],"X":3,"Var":"MoveVelocity_Enable"}],"LRI":18,"RRI":19,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"EM3_Gear"},{"__type":"LD","Ix":1,"Var":"Execute_GearOut","X":1},{"__type":"LD","Var":"Belt.Status.Synchronized","X":2},{"__type":"FB","In":[{"__type":"PRM","Arg":"Slave","IO":true,"Ix":3,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Deceleration","Ix":4,"Type":"LREAL","Var":"10000"},{"__type":"PRM","Arg":"Jerk","Ix":5,"Type":"LREAL","Var":""},{"__type":"PRM","Arg":"OutMode","Ix":6,"Type":"_eMC_OUT_MODE","Var":"_eMC_OUT_MODE#_mcStop"}],"Ix":12,"Name":"MC_GearOut","Out":[{"__type":"PRM","Arg":"Slave","IO":true,"Ix":7,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":8,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":10,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":11,"Type":"WORD","Var":""}],"X":3,"Var":"GearOut_Enable"}],"LRI":13,"RRI":14,"VLs":[]}
