{"CLs":[{"__type":"LD","Var":"P_First_RunMode"},{"__type":"IST","EID":"d080593c-05a7-4318-8903-933d2255259a","H":331.5,"Ix":1,"TXT":"\/\/ Some variable initialization\u000d\u000aFTPAddr.Adr      := '192.168.250.2';\/\/ Address \u000d\u000aFTPAddr.PortNo   := UINT#21;        \/\/ Port number \u000d\u000aFTPAddr.UserName := 'democaseV5'; \/\/ User name \u000d\u000aFTPAddr.Password := 'omron123'; \/\/ Password \u000d\u000a(*\u000d\u000asRetryCfg.RetryInterval:= 100;\u000d\u000asRetryCfg.RetryNum:=20;\u000d\u000asRetryCfg.TimeOut:=100;\u000d\u000a*)\u000d\u000asExecOption.OverWrite:=TRUE;\u000d\u000a","W":715.5,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"P_On"},{"__type":"LD","Ix":1,"Var":"_EIP_EtnOnlineSta","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":"t#500ms"}],"Ix":5,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":2,"Var":"TimerStart"},{"__type":"ST","Ix":2,"Var":"getStart","X":3}],"LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"getStart"},{"__type":"FB","In":[{"__type":"PF","Arg":"Run"},{"__type":"PRM","Arg":"Path","Ix":1,"Type":"STRING[32]","Var":"'02\\127.0.0.1'"}],"Ix":5,"Name":"GetDeviceMac","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Done","Ix":2,"Type":"BOOL","Var":"bGetMACDone"},{"__type":"PRM","Arg":"Error","Ix":3,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Mac","Ix":4,"Type":"STRING[16]","Var":"ClientID"}],"UD":true,"X":1,"Var":"GetMacAddress"}],"LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"e199cc76-3ad3-43ca-8d22-18fc00000013","Up":true,"Var":"bGetMACDone"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"2"}],"Ix":3,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"uiRegStage"}],"X":1}],"LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"bPublish"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":1,"Type":"TIME","Var":"t#1000ms"}],"Ix":17,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":2,"Type":"TIME","Var":""}],"X":1,"Var":"tDelay"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Topic","Ix":3,"Type":"STRING[128]","Var":"strTopic"},{"__type":"PRM","Arg":"Message","IO":true,"Ix":4,"Type":"STRING[1986]","Var":"strMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":5,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"QoS","Ix":6,"Type":"BYTE","Var":"0"},{"__type":"PRM","Arg":"Retained","Ix":7,"Type":"BOOL","Var":"FALSE"},{"__type":"PRM","Arg":"Dup","Ix":8,"Type":"BOOL","Var":"FALSE"}],"Ix":18,"Name":"MQTTPublish","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Message","IO":true,"Ix":10,"Type":"STRING[1986]","Var":"strMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":11,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"Size","Ix":12,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"PacketID","Ix":13,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"Error","Ix":14,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":15,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorIDEx","Ix":16,"Type":"DWORD","Var":""}],"UD":true,"X":2,"Var":"Log_Publish"}],"LRI":19,"RRI":20,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"bSubscribe"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":31,"Type":"TIME","Var":"t#100ms"}],"Ix":49,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":32,"Type":"TIME","Var":""}],"X":1,"Var":"tDelay2"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Topic","Ix":1,"Type":"STRING[128]","Var":"strSubsTopic"},{"__type":"PRM","Arg":"QoS","Ix":2,"Type":"BYTE","Var":""},{"__type":"PRM","Arg":"Message","IO":true,"Ix":3,"Type":"STRING[1986]","Var":"strSubsMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":4,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":5,"Type":"STRING[128]","Var":"RcvTopic"}],"Ix":48,"Name":"MQTTSubscribe","Out":[{"__type":"PF","Arg":"Subscribed"},{"__type":"PRM","Arg":"Done","Ix":6,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Busy","Ix":7,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Message","IO":true,"Ix":8,"Type":"STRING[1986]","Var":"strSubsMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":9,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":10,"Type":"STRING[128]","Var":"RcvTopic"},{"__type":"PRM","Arg":"PacketID","Ix":11,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"Error","Ix":12,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorIDEx","Ix":14,"Type":"DWORD","Var":""},{"__type":"PRM","Arg":"Size","Ix":15,"Type":"UINT","Var":""}],"UD":true,"X":2,"Var":"log_Subscribe"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Topic","Ix":16,"Type":"STRING[128]","Var":"strURLTopic"},{"__type":"PRM","Arg":"QoS","Ix":17,"Type":"BYTE","Var":""},{"__type":"PRM","Arg":"Message","IO":true,"Ix":18,"Type":"STRING[1986]","Var":"strURLMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":19,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":20,"Type":"STRING[128]","Var":"RcvURLTopic"}],"Ix":50,"Name":"MQTTSubscribe","Out":[{"__type":"PF","Arg":"Subscribed"},{"__type":"PRM","Arg":"Done","Ix":21,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Busy","Ix":22,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Message","IO":true,"Ix":23,"Type":"STRING[1986]","Var":"strURLMsg"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":24,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":25,"Type":"STRING[128]","Var":"RcvURLTopic"},{"__type":"PRM","Arg":"PacketID","Ix":26,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"Error","Ix":27,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":28,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorIDEx","Ix":29,"Type":"DWORD","Var":""},{"__type":"PRM","Arg":"Size","Ix":30,"Type":"UINT","Var":""}],"UD":true,"X":2,"Y":1,"Var":"URL_Subscribe"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Topic","Ix":33,"Type":"STRING[128]","Var":"strQRTopic"},{"__type":"PRM","Arg":"QoS","Ix":34,"Type":"BYTE","Var":""},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":35,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":36,"Type":"STRING[128]","Var":"RcvQRtopic"},{"__type":"PRM","Arg":"Message","IO":true,"Ix":37,"Type":"ARRAY[*] OF BYTE","Var":"arrQRmessage"}],"Ix":51,"Name":"MQTTSubscribeArr","Out":[{"__type":"PRM","Arg":"Size","Ix":38,"Type":"UINT","Var":"QRmsgSize"},{"__type":"PF","Arg":"Subscribed"},{"__type":"PRM","Arg":"Done","Ix":39,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":40,"Type":"MQTT\\ClientBuffer","Var":"MQTTBuffer"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":41,"Type":"STRING[128]","Var":"RcvQRtopic"},{"__type":"PRM","Arg":"Message","IO":true,"Ix":42,"Type":"ARRAY[*] OF BYTE","Var":"arrQRmessage"},{"__type":"PRM","Arg":"Busy","Ix":43,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"PacketID","Ix":44,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"Error","Ix":45,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":46,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorIDEx","Ix":47,"Type":"DWORD","Var":""}],"UD":true,"X":2,"Y":2,"Var":"QR_subscribe"}],"CMT":"\/\/Administration Subscribe data","LRI":52,"RRI":53,"VLs":[{"Ix":54,"X":2},{"Ix":54,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"bQRtoNA"},{"__type":"LD","Id":"59ee423f-a10c-494c-a451-2519000042b4","Ix":1,"Up":true,"Var":"b_registered","Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"ConnectSvr","Ix":2,"Type":"_sFTP_CONNECT_SVR","Var":"FTPAddr"},{"__type":"PRM","Arg":"SvrDirName","Ix":3,"Type":"STRING","Var":"'\/'"},{"__type":"PRM","Arg":"FileName","Ix":4,"Type":"STRING","Var":"'qr.png'"},{"__type":"PRM","Arg":"ExecOption","Ix":5,"Type":"_sFTP_EXEC_OPTION","Var":""},{"__type":"PRM","Arg":"RetryCfg","Ix":6,"Type":"_sFTP_RETRY_CFG","Var":""},{"__type":"PRM","Arg":"Cancel","Ix":7,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"RemoveFileResult","IO":true,"Ix":8,"Type":"ARRAY[0..N] OF _sFTP_FILE_RESULT","Var":"sFTPResult"}],"Ix":16,"Name":"FTPRemoveFile","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandCanceled","Ix":10,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":11,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":12,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ErrorIDEx","Ix":13,"Type":"DWORD","Var":""},{"__type":"PRM","Arg":"RemoveNum","Ix":14,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"RemoveFileResult","IO":true,"Ix":15,"Type":"ARRAY[0..N] OF _sFTP_FILE_RESULT","Var":"sFTPResult"}],"X":1,"Var":"FTPClient_remove"}],"CMT":"\/\/ FTP to NA ( To upload QR code","LRI":17,"RRI":18,"VLs":[{"Ix":19,"X":1}]}
{"CLs":[{"__type":"LD","Var":"FTPClient_remove.Error"},{"__type":"LD","Ix":1,"Var":"FTPClient_remove.Done","Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"ConnectSvr","Ix":2,"Type":"_sFTP_CONNECT_SVR","Var":"FTPAddr"},{"__type":"PRM","Arg":"SvrDirName","Ix":3,"Type":"STRING","Var":"'\/'"},{"__type":"PRM","Arg":"LocalDirName","Ix":4,"Type":"STRING","Var":"'\/'"},{"__type":"PRM","Arg":"FileName","Ix":5,"Type":"STRING","Var":"'qr.png'"},{"__type":"PRM","Arg":"ExecOption","Ix":6,"Type":"_sFTP_EXEC_OPTION","Var":"sExecOption"},{"__type":"PRM","Arg":"RetryCfg","Ix":7,"Type":"_sFTP_RETRY_CFG","Var":""},{"__type":"PRM","Arg":"Cancel","Ix":8,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"PutFileResult","IO":true,"Ix":9,"Type":"ARRAY[0..N] OF _sFTP_FILE_RESULT","Var":"sFTPResult"}],"Ix":17,"Name":"FTPPutFile","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":10,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandCanceled","Ix":11,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":12,"Type":"BOOL","Var":"FTPerr"},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":"FTPerrID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":14,"Type":"DWORD","Var":"FTPerrIDex"},{"__type":"PRM","Arg":"PutNum","Ix":15,"Type":"UINT","Var":"FTPportNum"},{"__type":"PRM","Arg":"PutFileResult","IO":true,"Ix":16,"Type":"ARRAY[0..N] OF _sFTP_FILE_RESULT","Var":"sFTPResult"}],"X":1,"Var":"FTPclient"}],"LRI":18,"RRI":19,"VLs":[{"Ix":20,"X":1}]}
{"CLs":[{"__type":"LD","Id":"59ee423f-a10c-494c-a451-251900004145","Up":true,"Var":"FTPclient.Done"},{"__type":"ST","Ix":1,"S":true,"Var":"QRupdated","X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"e199cc76-3ad3-43ca-8d22-18fc0000006a","Up":true,"Var":"log_Subscribe.Done"},{"__type":"IST","EID":"58292c16-3c51-454a-9f4d-0769030d58e6","H":326.99999999999966,"Ix":1,"TXT":"IF strSubsMsg='Registered' THEN\u000d\u000a\u0009b_registered:=TRUE;\u000d\u000a\u0009HMI_DeployStatus.Status:='Registered' ;\u000d\u000aELSIF HMI_DeployStatus.Status ='Registering...' THEN\u000d\u000a\u0009HMI_DeployStatus.Status:='Registering...' ;\u000d\u000aELSIF strSubsMsg='Database Sign in' THEN\u000d\u000a\u0009HMI_DeployStatus.DatabaseCreated:=TRUE;\u000d\u000aELSIF strSubsMsg='DashBoard deployed' THEN\u000d\u000a\u0009HMI_DeployStatus.DashboardCreated:=TRUE;\u000d\u000aELSIF strSubsMsg='DashBoard fault' THEN\u000d\u000a\u0009HMI_DeployStatus.DashboardCreated:=FALSE;\u000d\u000aELSIF strSubsMsg='Not Registered' THEN\u000d\u000a\u0009HMI_DeployStatus.DatabaseCreated:=FALSE;\u000d\u000a\u0009HMI_DeployStatus.DashboardCreated:=FALSE;\u000d\u000a\u0009HMI_DeployStatus.Status:='Not Registered' ;\u000d\u000a\u0009b_registered:=FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\u000d\u000a","W":760,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"e199cc76-3ad3-43ca-8d22-18fc0000004d","Up":true,"Var":"URL_Subscribe.Done"},{"__type":"LD","Ix":1,"Var":"P_First_RunMode","Y":1},{"__type":"IST","EID":"d7c10685-14b1-400d-a0bf-b9562887eacc","H":130,"Ix":2,"TXT":"HMI_DeployStatus.DashboardURL:=strURLMsg;","W":805.5,"X":1}],"LRI":3,"RRI":4,"VLs":[{"Ix":5,"X":1}]}
{"CLs":[{"__type":"LD","Var":"QR_subscribe.Done"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"FileName","Ix":2,"Type":"STRING","Var":"'qr.png'"},{"__type":"PRM","Arg":"Mode","Ix":3,"Type":"_eFOPEN_MODE","Var":"_eFOPEN_MODE#_RDWR_CREATE"}],"Ix":19,"Name":"FileOpen","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":4,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":6,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"FileID","Ix":7,"Type":"DWORD","Var":""}],"X":1,"Var":"QROpen"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"FileID","Ix":8,"Type":"DWORD","Var":"QROpen.FileID"},{"__type":"PRM","Arg":"WriteBuf","Ix":9,"Type":"ANY_ELEMENTARY[], ENUM[], STRUCT[]","Var":"arrQRmessage[0]"},{"__type":"PRM","Arg":"Size","Ix":10,"Type":"UINT","Var":"QR_subscribe.Size"}],"Ix":20,"Name":"FileWrite","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":11,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":12,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"WriteSize","Ix":14,"Type":"UINT","Var":""}],"X":2,"Var":"QRWriteFile"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"FileID","Ix":15,"Type":"DWORD","Var":"QROpen.FileID"}],"Ix":21,"Name":"FileClose","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":16,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":17,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":18,"Type":"WORD","Var":""}],"X":3,"Var":"QRClose"},{"__type":"ST","Ix":1,"Var":"bQRtoNA","X":4}],"LRI":22,"RRI":23,"VLs":[]}
