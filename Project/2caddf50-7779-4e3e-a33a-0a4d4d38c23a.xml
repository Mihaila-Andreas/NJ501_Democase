{"CLs":[{"__type":"LD","Id":"fee786a1-88c2-4e6e-8cb3-31740000000b","Up":true,"Var":"EM3_PackML"},{"__type":"IST","EID":"4a4e88d9-e35c-4dc3-b762-518ab35d3f16","H":281.66666666666669,"Ix":1,"TXT":"timeprod:=60\/TO_LREAL(1.05*myMachine.Command.MachSpeed);\u000d\u000atimecyc:=(timeprod-DwellReal\/500)\/2;\u000d\u000amyvelbelt:=BeltDistance*4\/3\/timecyc;\u000d\u000amyaccelbelt:=4*myvelbelt\/timecyc;\u000d\u000amyveldisk:=DiskDistance*4\/3\/timecyc;\u000d\u000amyacceldisk:=4*myveldisk\/timecyc;\u000d\u000aBeltDistanceNeg:=-1*BeltDistance;\u000d\u000aDiskDistanceNeg:=-1*DiskDistance;\u000d\u000aTimenow:=Get1msCnt();\u000d\u000aTimeold:=Timenow;","W":882.66666666666674,"X":1}],"CMT":"Calculate Speed, Accel and Decel","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"LD","Ix":1,"Not":true,"Var":"Lot_FinishedBelt","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"ExecuteTrigger","X":2},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":20,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Distance","Ix":21,"Type":"LREAL","Var":"BeltDistance"},{"__type":"PRM","Arg":"Velocity","Ix":22,"Type":"LREAL","Var":"myvelbelt"},{"__type":"PRM","Arg":"Acceleration","Ix":23,"Type":"LREAL","Var":"myaccelbelt"},{"__type":"PRM","Arg":"Deceleration","Ix":24,"Type":"LREAL","Var":"myaccelbelt"},{"__type":"PRM","Arg":"Jerk","Ix":25,"Type":"LREAL","Var":"myjerk1"},{"__type":"PRM","Arg":"BufferMode","Ix":26,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":36,"Name":"MC_MoveRelative","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":27,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":28,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":29,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":30,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":31,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":32,"Type":"WORD","Var":""}],"X":3,"Var":"move1forwardBelt"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":18,"Type":"TIME","Var":"DwellTime"}],"Ix":35,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":19,"Type":"TIME","Var":""}],"X":4,"Var":"time1forwardBelt"},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":5,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Distance","Ix":6,"Type":"LREAL","Var":"BeltDistanceNeg"},{"__type":"PRM","Arg":"Velocity","Ix":7,"Type":"LREAL","Var":"myvelbelt"},{"__type":"PRM","Arg":"Acceleration","Ix":8,"Type":"LREAL","Var":"myaccelbelt"},{"__type":"PRM","Arg":"Deceleration","Ix":9,"Type":"LREAL","Var":"myaccelbelt"},{"__type":"PRM","Arg":"Jerk","Ix":10,"Type":"LREAL","Var":"myjerk1"},{"__type":"PRM","Arg":"BufferMode","Ix":11,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":34,"Name":"MC_MoveRelative","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":12,"Type":"_sAXIS_REF","Var":"Belt"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":13,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":14,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":15,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":16,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":17,"Type":"WORD","Var":""}],"X":5,"Var":"move1reverseBelt"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":"DwellTime"}],"Ix":33,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":6,"Var":"time1reverseBelt"}],"CMT":"Production operation BELT","LRI":37,"RRI":38,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"LD","Ix":1,"Not":true,"Var":"Lot_Finished","X":1},{"__type":"LD","Ix":2,"Not":true,"Var":"ExecuteTrigger","X":2},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":3,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Distance","Ix":4,"Type":"LREAL","Var":"DiskDistance"},{"__type":"PRM","Arg":"Velocity","Ix":5,"Type":"LREAL","Var":"myveldisk"},{"__type":"PRM","Arg":"Acceleration","Ix":6,"Type":"LREAL","Var":"myacceldisk"},{"__type":"PRM","Arg":"Deceleration","Ix":7,"Type":"LREAL","Var":"myacceldisk"},{"__type":"PRM","Arg":"Jerk","Ix":8,"Type":"LREAL","Var":"myjerk1"},{"__type":"PRM","Arg":"BufferMode","Ix":9,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":33,"Name":"MC_MoveRelative","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":10,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":11,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":12,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":13,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":14,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":15,"Type":"WORD","Var":""}],"X":3,"Var":"move1forwardDisk"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":29,"Type":"TIME","Var":"DwellTime"}],"Ix":35,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":30,"Type":"TIME","Var":""}],"X":4,"Var":"time1forwardDisk"},{"__type":"FB","In":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":16,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Distance","Ix":17,"Type":"LREAL","Var":"DiskDistanceNeg"},{"__type":"PRM","Arg":"Velocity","Ix":18,"Type":"LREAL","Var":"myveldisk"},{"__type":"PRM","Arg":"Acceleration","Ix":19,"Type":"LREAL","Var":"myacceldisk"},{"__type":"PRM","Arg":"Deceleration","Ix":20,"Type":"LREAL","Var":"myacceldisk"},{"__type":"PRM","Arg":"Jerk","Ix":21,"Type":"LREAL","Var":"myjerk1"},{"__type":"PRM","Arg":"BufferMode","Ix":22,"Type":"_eMC_BUFFER_MODE","Var":""}],"Ix":34,"Name":"MC_MoveRelative","Out":[{"__type":"PRM","Arg":"Axis","IO":true,"Ix":23,"Type":"_sAXIS_REF","Var":"Disk"},{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":24,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Active","Ix":25,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"CommandAborted","Ix":26,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":27,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":28,"Type":"WORD","Var":""}],"X":5,"Var":"move1reverseDisk"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":31,"Type":"TIME","Var":"DwellTime"}],"Ix":36,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":32,"Type":"TIME","Var":""}],"X":6,"Var":"time1reverseDisk"}],"CMT":"Production operation DISK","LRI":37,"RRI":38,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"EM3_PackML"},{"__type":"LD","Var":"time1reverseBelt.Q","X":1},{"__type":"LD","Ix":1,"Var":"time1reverseDisk.Q","X":2},{"__type":"ST","Ix":3,"Var":"ExecuteTrigger","X":3}],"CMT":"Execute_cycle and Cycle Speed Calculation","LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"EM3_PackML"},{"__type":"LD","Id":"e71f132e-f439-43a0-a8ab-7929000009f4","Up":true,"Var":"ExecuteTrigger","X":1},{"__type":"IST","EID":"1a13f667-e46a-440d-8fb8-b73cf5e15544","H":130,"Ix":2,"TXT":"Timenow:=Get1msCnt();\u000d\u000aActualMachineSpeed:=60000\/TO_LREAL(Timenow-Timeold);\u000d\u000aTimeold:=Timenow;","W":634.66666666666674,"X":2}],"LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"EM3_PackML"},{"__type":"IST","EID":"880c0b29-7501-4daa-abaf-d22d094161c0","H":130,"Ix":1,"TXT":"ActualMachineSpeed:=0;","W":725.33333333333348,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"LD","Ix":1,"Var":"move1reverseBelt.Execute","X":1},{"__type":"LD","Ix":2,"Var":"move1reverseBelt.Done","X":1,"Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"xStart","Ix":3,"Type":"BOOL","Var":"Belt.Details.InPosWaiting"},{"__type":"PRM","Arg":"xStop","Ix":4,"Type":"BOOL","Var":"move1reverseBelt.Done"}],"Ix":8,"Name":"GetTimeSpan","Out":[{"__type":"PF","Arg":"Enabled"},{"__type":"PRM","Arg":"Done","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Busy","Ix":6,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"TimeSpan","Ix":7,"Type":"LINT","Var":"SettlingTimeBelt"}],"UD":true,"X":2,"Var":"GetSettlingTimeBelt"}],"LRI":9,"RRI":10,"VLs":[{"Ix":11,"X":1},{"Ix":12,"X":2}]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"LD","Ix":1,"Var":"move1reverseDisk.Execute","X":1},{"__type":"LD","Ix":2,"Var":"move1reverseDisk.Done","X":1,"Y":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"xStart","Ix":3,"Type":"BOOL","Var":"Disk.Details.InPosWaiting"},{"__type":"PRM","Arg":"xStop","Ix":4,"Type":"BOOL","Var":"move1reverseDisk.Done"}],"Ix":8,"Name":"GetTimeSpan","Out":[{"__type":"PF","Arg":"Enabled"},{"__type":"PRM","Arg":"Done","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Busy","Ix":6,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"TimeSpan","Ix":7,"Type":"LINT","Var":"SettlingTimeDisk"}],"UD":true,"X":2,"Var":"GetSettlingTimeDisk"}],"LRI":9,"RRI":10,"VLs":[{"Ix":11,"X":1},{"Ix":12,"X":2}]}
{"CLs":[{"__type":"IST","EID":"5b0946e9-e579-4db3-9538-155da1ecf793","H":233.33333333333331,"TXT":"IF EM3_PackML THEN\u000d\u000a\u0009SettlingTime:=MAX(SettlingTimeBelt,SettlingTimeDisk)\/1000;\u000d\u000aELSE\u000d\u000a\u0009SettlingTime:=0;\u000d\u000aEND_IF;\u000d\u000aIF SettlingTime>30 THEN\u000d\u000a\u0009AlarmActivation[2,6]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009AlarmActivation[2,6]:=FALSE;\u000d\u000aEND_IF;\u000d\u000a","W":922.66666666666652}],"CMT":"Settling time calculation and alarm","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"EM3_PackML"},{"__type":"LD","Var":"ExecuteTrigger","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":2,"Type":"ANY_INT","Var":"EM0_ProductsDone"}],"Ix":5,"Name":"Inc","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":3,"Type":"ANY_INT","Var":"EM0_ProductsDone"},{"__type":"PRM","Arg":"","Ix":4,"Type":"BOOL","Var":""}],"X":2}],"CMT":"Product counter. When lot is finished Execute SC is issued","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"EM0_ProductsDone"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"LotNumOfProducts"}],"Ix":4,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"ST","Ix":1,"Var":"Lot_FinishedBelt","X":2}],"LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Ix":1,"Var":"EM3_PackML"},{"__type":"LD","Var":"ExecuteTrigger","X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":2,"Type":"ANY_INT","Var":"EM1_ProductsDone"}],"Ix":5,"Name":"Inc","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"InOut","IO":true,"Ix":3,"Type":"ANY_INT","Var":"EM1_ProductsDone"},{"__type":"PRM","Arg":"","Ix":4,"Type":"BOOL","Var":""}],"X":2}],"CMT":"Product counter. When lot is finished Execute SC is issued","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"EM1_ProductsDone"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY(except BOOL)","Var":"LotNumOfProducts"}],"Ix":4,"Name":">=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"ST","Ix":1,"Var":"Lot_Finished","X":2}],"LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":7,"Type":"ANY_ELEMENTARY, ENUM","Var":"BatchNumber"},{"__type":"PRM","Arg":"In2","Ix":8,"Type":"ANY_ELEMENTARY, ENUM","Var":"BatchNumberHMI"}],"Ix":10,"Name":"<>","Out":[{"__type":"PF","Arg":""}],"X":1},{"__type":"LD","Ix":1,"Var":"Lot_Finished","X":1,"Y":1},{"__type":"LD","Ix":2,"Var":"Lot_FinishedBelt","X":2,"Y":1},{"__type":"HL","X":2},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":5,"Type":"TIME","Var":"TransitionDelay[6]"}],"Ix":9,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":6,"Type":"TIME","Var":""}],"X":3,"Var":"Execute_End_Delay"},{"__type":"ST","Ix":3,"Var":"EM1ReqTransition.Sts_Execute_SC","X":4},{"__type":"ST","Ix":4,"Var":"EM0ReqTransition.Sts_Execute_SC","X":4,"Y":1}],"CMT":"Lot finished, request to change to Complete","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":4},{"Ix":14,"X":1},{"Ix":15,"X":3}]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"}],"Ix":2,"Name":"Get1usCnt","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":1,"Type":"ULINT","Var":"uscount"}],"X":1}],"CMT":"Generate Random Defective products","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"IST","EID":"b42d8387-7e74-49db-a4a7-0b2301e8991e","H":56.000000000000114,"Ix":1,"TXT":"QualityLevel:=TO_REAL(PercentageDefectiveProduct)\/100;\u000d\u000a","W":549,"X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Not":true,"Var":"EM3_PackML"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ULINT","Var":"uscount"}],"Ix":3,"Name":"ULINT_TO_UINT","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"","Ix":2,"Type":"UINT","Var":"uscountInt"}],"X":1}],"LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"EM3_PackML"},{"__type":"LD","Ix":1,"Var":"ExecuteTrigger","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Seed","Ix":2,"Type":"UINT","Var":"uscountInt"}],"Ix":4,"Name":"Rand","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Rnd","Ix":3,"Type":"LREAL","Var":"ProductQualityLevel"}],"X":2,"Var":"DefectiveProduct"}],"LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"b52fed63-2585-497b-8303-00286eb4817f","H":560.66666666666629,"TXT":"\/\/If product is not present, send to Suspending\/suspend and rise notification\u000d\u000aIF IOLSensorLevel<25 AND EM3_PackML THEN\u000d\u000a\u0009EM0ReqTransition.Cmd_Suspend:=TRUE;\u000d\u000a\u0009EM1ReqTransition.Cmd_Suspend:=TRUE;\u000d\u000a\u0009AlarmActivation[2,3]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009EM0ReqTransition.Cmd_Suspend:=FALSE;\u000d\u000a\u0009EM1ReqTransition.Cmd_Suspend:=FALSE;\u000d\u000aEND_IF;\u000d\u000aIF EM3_PackML=FALSE AND myMachine.Status.StateCurrent<>13 AND myMachine.Status.StateCurrent<>5 THEN\u000d\u000a\u0009AlarmActivation[2,3]:=FALSE;\u000d\u000aEND_IF;\u000d\u000aIF myMachine.Status.StateCurrent=13 OR myMachine.Status.StateCurrent=14 THEN\u000d\u000a\u0009myMachine.Status.EquipmentInterlock.Starved:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009myMachine.Status.EquipmentInterlock.Starved:=FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/Count defective products and rise the right notification.\u000d\u000aIF ExecuteTrigger THEN\u000d\u000a\u0009IF ((IOLSensorLevel>190 AND BatchTable[BatchNumber,0]=1) OR (IOLSensorLevel<150 AND BatchTable[BatchNumber,0]=2)) AND IgnoreSensorLevel=FALSE THEN\u000d\u000a\u0009\u0009ProductWrongDetect:=TRUE;\u000d\u000a\u0009\u0009AlarmActivation[2,1]:=TRUE;\u000d\u000a\u0009\u0009SensorOutput:=TRUE;\u000d\u000a\u0009\u0009IF SetDirtyPhotocell OR HMI_Photocell_UnStable THEN \u000d\u000a\u0009\u0009\u0009DirtyPhotocellWarning:=TRUE;\u000d\u000a\u0009\u0009\u0009AlarmActivation[2,9]:=TRUE;\u000d\u000a\u0009\u0009ELSE\u000d\u000a\u0009\u0009\u0009DirtyPhotocellWarning:=FALSE;\u000d\u000a\u0009\u0009\u0009AlarmActivation[2,9]:=FALSE;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009ELSE\u000d\u000a\u0009\u0009ProductWrongDetect:=FALSE;\u000d\u000a\u0009\u0009AlarmActivation[2,1]:=FALSE;\u000d\u000a\u0009\u0009SensorOutput:=FALSE;\u000d\u000a\u0009END_IF;\u000d\u000a\u0009IF ProductQualityLevel<QualityLevel THEN\u000d\u000a\u0009\u0009AlarmActivation[2,2]:=TRUE;\u000d\u000a\u0009ELSE\u000d\u000a\u0009\u0009AlarmActivation[2,2]:=FALSE;\u000d\u000a\u0009END_IF;\u000d\u000a\u0009IF AlarmActivation[2,1] OR AlarmActivation[2,2] or ForceDefects  THEN\u000d\u000a\u0009\u0009myMachine.Admin.ProdDefectiveCount[1].Count:=myMachine.Admin.ProdDefectiveCount[1].Count+1;\u000d\u000a\u0009\u0009IF ForceDefects THEN\u000d\u000a\u0009\u0009\u0009ConsecutiveDefectCount:=ConsecutiveDefectCount+1;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009END_IF;\u000d\u000aEND_IF;\u000d\u000a\/\/To add \"Dirty\" offset\u000d\u000aHMI_IOLSensorLevel:=IOLSensorLevel;\u000d\u000aIF EM3_PackML=FALSE THEN\u000d\u000a\u0009AlarmActivation[2,1]:=FALSE;\u000d\u000a\u0009AlarmActivation[2,2]:=FALSE;\u000d\u000a\u0009SensorOutput:=FALSE;\u000d\u000a\u0009DirtyPhotocellWarning:=FALSE;\u000d\u000a\u0009AlarmActivation[2,9]:=FALSE;\u000d\u000aEND_IF;\u000d\u000aIF ForceDefects=FALSE THEN ConsecutiveDefectCount:=0; END_IF;\u000d\u000aIF ConsecutiveDefectCount>5 THEN\u000d\u000a\u0009AlarmActivation[2,8]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009AlarmActivation[2,8]:=FALSE;\u000d\u000aEND_IF;\u000d\u000aIF ConsecutiveDefectCount>10 THEN\u000d\u000a\u0009AlarmActivation[2,7]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009AlarmActivation[2,7]:=FALSE;\u000d\u000aEND_IF;","W":991.3333333333336}],"CMT":"Check IOLink sensor. Request to Suspend if product not present (Starved Machine. Count Defective if detection level is not OK","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"be1c09a2-4ddc-4e9a-9609-b0c69bf5b4c5","H":421.99999999999989,"TXT":"IF Hopper.Usage THEN\u000d\u000a\u0009\/\/Decrease level\u000d\u000a\u0009IF ExecuteTrigger AND Hopper.Level>0 THEN\u000d\u000a\u0009\u0009Hopper.Level:=Hopper.Level-5;\u000d\u000a\u0009END_IF;\u0009\u000d\u000a\u0009\/\/Refill\u000d\u000a\u0009IF Hopper.Refill THEN\u000d\u000a\u0009\u0009Hopper.Level:=100;\u000d\u000a\u0009\u0009Hopper.Refill:=FALSE;\u000d\u000a\u0009END_IF;\u000d\u000aELSE\u000d\u000a\u0009Hopper.Warning:=FALSE;\u000d\u000a\u0009Hopper.Alarm:=FALSE;\u000d\u000a\u0009Hopper.Level:=100;\u000d\u000a\u0009Hopper.Refill:=FALSE;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/Alarm and Warning managemen\u000d\u000aIF Hopper.Level<=20 THEN\u000d\u000a\u0009Hopper.Warning:=TRUE;\u000d\u000a\u0009AlarmActivation[2,4]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009Hopper.Warning:=FALSE;\u000d\u000a\u0009AlarmActivation[2,4]:=FALSE;\u000d\u000aEND_IF;\u000d\u000aIF Hopper.Level=0 THEN\u000d\u000a\u0009Hopper.Alarm:=TRUE;\u000d\u000a\u0009EM0ReqTransition.Cmd_Hold:=TRUE;\u000d\u000a\u0009EM1ReqTransition.Cmd_Hold:=TRUE;\u000d\u000a\u0009AlarmActivation[2,5]:=TRUE;\u000d\u000aELSE\u000d\u000a\u0009Hopper.Alarm:=FALSE;\u000d\u000a\u0009EM0ReqTransition.Cmd_Hold:=FALSE;\u000d\u000a\u0009EM1ReqTransition.Cmd_Hold:=FALSE;\u000d\u000a\u0009AlarmActivation[2,5]:=FALSE;\u000d\u000aEND_IF;","W":1094}],"CMT":"DISTURBANCE: Hopper management","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"7a54d54f-3e25-4c2f-9d5d-c51a00000148","Up":true,"Var":"ExecuteTrigger"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":2,"Type":"TIME","Var":"time#100ms"}],"Ix":4,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":3,"Type":"TIME","Var":""}],"X":1,"Var":"TPAllProducts"},{"__type":"ST","Ix":1,"Var":"NewProductAll","X":2}],"CMT":"Pulse outputs for product counter for BlackBird","LRI":5,"RRI":6,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"7a54d54f-3e25-4c2f-9d5d-c51a00000079","Up":true,"Var":"ExecuteTrigger"},{"__type":"LD","Ix":1,"Var":"ForceDefects","X":1},{"__type":"LD","Ix":2,"Var":"AlarmActivation[2,1]","X":1,"Y":1},{"__type":"LD","Ix":3,"Var":"AlarmActivation[2,2]","X":1,"Y":2},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":5,"Type":"TIME","Var":"time#100ms"}],"Ix":7,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":6,"Type":"TIME","Var":""}],"X":2,"Var":"TPBadProducts"},{"__type":"ST","Ix":4,"Var":"NewProductBad","X":3}],"LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":1},{"Ix":10,"X":1,"Y":1},{"Ix":11,"X":2},{"Ix":11,"X":2,"Y":1}]}
{"CLs":[{"__type":"LD","Id":"7a54d54f-3e25-4c2f-9d5d-c51a00000003","Up":true,"Var":"ExecuteTrigger"},{"__type":"LD","Ix":1,"Not":true,"Var":"NewProductBad","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":"time#100ms"}],"Ix":5,"Name":"TP","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":2,"Var":"TPGoodProducts"},{"__type":"ST","Ix":2,"Var":"NewProductGood","X":3}],"LRI":6,"RRI":7,"VLs":[]}
